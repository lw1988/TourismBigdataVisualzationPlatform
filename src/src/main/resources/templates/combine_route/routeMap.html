<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:th="http://www.thymeleaf.org">
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<!--
这是起始页面，你可以使用此页面开始你的项目。
此页面移除了链接，并提供了所需要的标记。
-->
<html>
<head>
    <meta charset="utf-8" content="text/html; charset=gb2312">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>旅游大数据可视化 | gxu</title>
    <!-- 告诉浏览器该页面是自适应布局 -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <link rel="stylesheet" th:href="@{/bower_components/bootstrap/dist/css/bootstrap.min.css}">
    <!-- Font Awesome -->
    <link rel="stylesheet" th:href="@{/bower_components/font-awesome/css/font-awesome.min.css}">
    <!-- Ionicons -->
    <link rel="stylesheet" th:href="@{/bower_components/Ionicons/css/ionicons.min.css}">
    <!-- Theme style -->
    <link rel="stylesheet" th:href="@{/dist/css/AdminLTE.min.css}">
    <!-- AdminLTE 皮肤。默认使用蓝色皮肤。
          您可以选择其他皮肤。皮肤样式写在 body 标签中，
          以便使之生效。 -->
    <link rel="stylesheet" th:href="@{/dist/css/skins/skin-blue.min.css}">

    <!--<&lt;!&ndash;font-family&ndash;&gt;-->
    <!--<link href="https://fonts.googleapis.com/css?family=Rufina:400,700" rel="stylesheet" />-->

    <!--<link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900" rel="stylesheet" />-->

    <!--style.css-->
    <link rel="stylesheet" href="commitSystem/assets/css/style.css" />
    <link rel="stylesheet" href="selfCSS/ie10-viewport-bug-workaround.css">

    <!-- HTML5 Shim and Respond.js} IE8 support of HTML5 elements and media queries -->
    <!-- 警告：Respond.js} 不支持 file:// 方式查看（即本地方式查看）-->
    <!--[if lt IE 9]>
    <script th:src="@{https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js}"></script>
    <script th:src="@{https://oss.maxcdn.com/respond/1.4.2/respond.min.js}"></script>
    <![endif]-->

    <!-- HighCharts引入 唯一需要注意的是保证 highcharts.js} 的
    引用顺序是在功能模块之前。 -->


    <script type="text/javascript" src="http://api.map.baidu.com/api?v=1.4"></script>

    <style>
        #right-panel {
            font-family: 'Roboto','sans-serif';
            line-height: 24px;
            padding-left: 10px;
        }

        #right-panel select, #right-panel input {
            font-size: 11px;
        }

        #right-panel select {
            width: 100%;
        }

        #right-panel i {
            font-size: 12px;
        }
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        #map {
            height: 100%;
            float: left;
            width: 70%;
            height: 100%;
        }
        #right-panel {
            margin: 20px;
            border-width: 2px;
            width: 20%;
            height: 400px;
            float: left;
            text-align: left;
            padding-top: 0;
        }
        #directions-panel {
            margin-top: 10px;
            background-color: #FFEE77;
            padding: 10px;
            overflow: scroll;
            height: 640px;
        }
    </style>



</head>
<!--
BODY 标签选项：
=================
使用下面一个或多个类来
获得所需效果
|---------------------------------------------------------|
| 皮 肤         | skin-blue                               |
|               | skin-black                              |
|               | skin-purple                             |
|               | skin-yellow                             |
|               | skin-red                                |
|               | skin-green                              |
|---------------------------------------------------------|
|布局选项       | fixed                                   |
|               | layout-boxed                            |
|               | layout-top-nav                          |
|               | sidebar-collapse                        |
|               | sidebar-mini                            |
|---------------------------------------------------------|
-->
<body class="hold-transition skin-blue sidebar-mini">

<div class="wrapper">
    <!-- Main Header -->
    <div th:include="common/main-header :: main-header"></div>
    <!-- Left side column. contains the logo and sidebar -->
    <div th:include="common/main-sidebar :: main-sidebar"></div>

    <div class="content-wrapper">

        <section id="subs" class="subscribe">
            <div class="container">
                <div class="subscribe-title text-center">
                    <h2>
                        组合路线推荐
                    </h2>
                    <p>
                        旅行从这里开始
                    </p>
                </div>
                <form>
                    <div class="row">
                        <div class="col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2">
                            <div class="custom-input-group">
                                <input type="text" class="form-control" placeholder="输入您想查询的关键字">
                                <button class="appsLand-btn subscribe-btn"><a th:href="@{/searchResult}">开始探索</a></button>
                                <div class="clearfix"></div>
                                <i class="icon ion-stats-bars"></i>
                            </div>

                        </div>
                    </div>
                </form>
            </div>

        </section>
        <!-- Main content -->
        <section class="content container-fluid">

            <!--------------------------
              | Your Page Content Here 数据图表展示页面 |
              -------------------------->
            <div style="width:1000px;height:700px;border:#ccc solid 1px;" id="map"></div>
            <div id="right-panel">
                <div>
                    <br>
                    <input type='button' value='热门路线1' onclick='run1();'/>
                    <input type='button' value='热门路线2' onclick='run2();' />
                    <input type='button' value='热门路线3' onclick='run3();' />
                </div>
            </div>


        </section>
        <!-- /.content -->
    </div>


    <footer class="main-footer">
        <!-- To the right -->
        <div class="pull-right hidden-xs">
            任何你想要的
        </div>
        <!-- Default to the left -->
        <strong>Copyright &copy; 2016 <a href="#">Company</a>.</strong> All rights reserved.
    </footer>

    <!-- Control Sidebar -->
    <aside class="control-sidebar control-sidebar-dark">
        <!-- Create the tabs -->
        <ul class="nav nav-tabs nav-justified control-sidebar-tabs">
            <li class="active"><a href="#control-sidebar-home-tab" data-toggle="tab"><i class="fa fa-home"></i></a></li>
            <li><a href="#control-sidebar-settings-tab" data-toggle="tab"><i class="fa fa-gears"></i></a></li>
        </ul>
        <!-- Tab panes -->
        <div class="tab-content">
            <!-- Home tab content -->
            <div class="tab-pane active" id="control-sidebar-home-tab">
                <h3 class="control-sidebar-heading">近期活动</h3>
                <ul class="control-sidebar-menu">
                    <li>
                        <a href="javascript:;">
                            <i class="menu-icon fa fa-birthday-cake bg-red"></i>

                            <div class="menu-info">
                                <h4 class="control-sidebar-subheading">Langdon's 生日</h4>

                                <p>23岁生日，在4月24日</p>
                            </div>
                        </a>
                    </li>
                </ul>
                <!-- /.control-sidebar-menu -->

                <h3 class="control-sidebar-heading">任务进度</h3>
                <ul class="control-sidebar-menu">
                    <li>
                        <a href="javascript:;">
                            <h4 class="control-sidebar-subheading">
                                自定义模板设计
                                <span class="pull-right-container">
                    <span class="label label-danger pull-right">70%</span>
                  </span>
                            </h4>

                            <div class="progress progress-xxs">
                                <div class="progress-bar progress-bar-danger" style="width: 70%"></div>
                            </div>
                        </a>
                    </li>
                </ul>
                <!-- /.control-sidebar-menu -->

            </div>
            <!-- /.tab-pane -->
            <!-- 统计标签内容 -->
            <div class="tab-pane" id="control-sidebar-stats-tab">统计标签内容</div>
            <!-- /.tab-pane -->
            <!-- Settings tab content -->
            <div class="tab-pane" id="control-sidebar-settings-tab">
                <form method="post">
                    <h3 class="control-sidebar-heading">常规设置</h3>

                    <div class="form-group">
                        <label class="control-sidebar-subheading">
                            报告面板使用
                            <input type="checkbox" class="pull-right" checked>
                        </label>

                        <p>
                            有关此常规设置选项信息
                        </p>
                    </div>
                    <!-- /.form-group -->
                </form>
            </div>
            <!-- /.tab-pane -->
        </div>
    </aside>
    <!-- /.control-sidebar -->
    <!-- 添加侧边栏的背景。
    这个 div必须放在 control-sidebar 之后 -->
    <div class="control-sidebar-bg"></div>
</div>

    <!-- REQUIRED JS SCRIPTS -->

<!-- jQuery 3 -->
<script th:src="@{/bower_components/jquery/dist/jquery.min.js}"></script>
<!-- Bootstrap 3.3.7 -->
<script th:src="@{/bower_components/bootstrap/dist/js/bootstrap.min.js}"></script>
<!-- AdminLTE App -->
<script th:src="@{/dist/js/adminlte.min.js}"></script>
</body>
<script type="text/javascript">
    function showValue(newValue)
    {
        //  document.getElementById("displayNameDisplay").innerHTML=document.getElementById("range").innerHTML=newValue;
    }
</script>
<script type="text/javascript">
    document.getElementById('yes').addEventListener('click', function() {
        var flag1,flag2,flag3,flag4,flag5;
        errorM=" ";
        if(parseInt(document.getElementById("money").value)<=0) {
            flag1=true;
            errorM=errorM+"money";
        }
        if(parseInt(document.getElementById("time").value)<=0) {
            flag2 = true;
            if(flag1) {
                errorM=errorM+" and time";
            }
            else{
                errorM=errorM+"time";
            }
        }
        if(document.getElementById("a1").checked==false && document.getElementById("a2").checked==false && document.getElementById("a3").checked==false) {
            flag3=true;
        }
        if(document.getElementById("b1").checked==false && document.getElementById("b2").checked==false && document.getElementById("b3").checked==false) {
            flag4=true;
        }
        if(document.getElementById("c1").checked==false && document.getElementById("c2").checked==false && document.getElementById("c3").checked==false) {
            flag5=true;
        }
        if(flag1 || flag2 || flag3 ||flag4 ||flag5) {
            if(flag1 || flag2) {
                alert("Please enter positive value for"+errorM)

            }
            if(flag3 || flag4 || flag5) {
                alert("Please specify the imporance off all the factors")
            }
        }
        else {
            var sum = 0, a, b, c;
            if (document.getElementById("a1").checked) {
                a = document.getElementById("a1").value;
                a = parseInt(a);
                sum = sum + parseInt(document.getElementById("a1").value);
            }
            if (document.getElementById("a2").checked) {
                a = document.getElementById("a2").value;
                a = parseInt(a);
                sum = sum + parseInt(document.getElementById("a2").value);
            }
            if (document.getElementById("a3").checked) {
                a = document.getElementById("a3").value;
                a = parseInt(a);
                sum = sum + parseInt(document.getElementById("a3").value);
            }
            if (document.getElementById("b1").checked) {
                b = document.getElementById("b1").value;
                b = parseInt(b);
                sum = sum + parseInt(document.getElementById("b1").value);
            }
            if (document.getElementById("b2").checked) {
                b = document.getElementById("b2").value;
                b = parseInt(b);
                sum = sum + parseInt(document.getElementById("b2").value);
            }
            if (document.getElementById("b3").checked) {
                b = document.getElementById("b3").value;
                b = parseInt(b);
                sum = sum + parseInt(document.getElementById("b3").value);
            }
            if (document.getElementById("c1").checked) {
                c = document.getElementById("c1").value;
                c = parseInt(c);
                sum = sum + parseInt(document.getElementById("c1").value);
            }
            if (document.getElementById("c2").checked) {
                c = document.getElementById("c2").value;
                c = parseInt(c);
                sum = sum + parseInt(document.getElementById("c2").value);
            }
            if (document.getElementById("c3").checked) {
                c = document.getElementById("c3").value;
                c = parseInt(c);
                sum = sum + parseInt(document.getElementById("c3").value);
            }
            var content = (a / sum).toString() + "," + (b / sum).toString() + "," + (c / sum).toString() + "," + document.getElementById("time").value + "," + document.getElementById("money").value;
            //document.getElementById("displayNameDisplay").innerHTML=content;
            uriContent = "data:application/octet-stream," + encodeURIComponent(content);
            //saveAs(uriContent,rex);
            document.getElementById("displayNameDisplay").innerHTML = "<a href=" + uriContent + " download=\"savedfile.txt\">Here is the download link</a>";
            //document.getElementById("displayNameDisplay").innerHTML=document.getElementById("money").value;
        }
    });
</script>


<script type="text/javascript">
    var map = new BMap.Map("map");
    map.centerAndZoom(new BMap.Point(110.290195,25.273566), 13);
    map.enableScrollWheelZoom(true);     //开启鼠标滚轮缩放
    map.addControl(new BMap.NavigationControl());               // 添加平移缩放控件
    map.addControl(new BMap.ScaleControl());                    // 添加比例尺控件
    map.addControl(new BMap.OverviewMapControl());              //添加缩略地图控件

    var i=0;

    // var read = new XMLHttpRequest();
    // read.open('GET', 'location_out_small.txt', false);
    // read.send();
    // var myP = new Array();
    // var displayName = read.responseText;
    // var array=displayName.split(/[, \n]/);
    // var i=array.length;
    // console.log(array);


    var myP = new Array();
    var myP1 = new Array();
    myP[0] = new BMap.Point(110.3237731,25.25740137);
    myP[1]= new BMap.Point(110.2727716,25.31013482);
    myP[2]= new BMap.Point(110.0997284,25.46126485);
    myP[3]= new BMap.Point(110.3332278,24.44091429);
    myP[4]= new BMap.Point(110.4869314,24.73183843);
    myP[5]= new BMap.Point(110.4926106,24.74881876);
    myP[6]= new BMap.Point(110.4824507,24.9225492);

    myP1[0] = new BMap.Point(110.0997284,25.46126485);
    myP1[1] = new BMap.Point(110.393081,24.86188856);
    myP1[2] = new BMap.Point(110.3332278,24.44091429);
    myP1[3] = new BMap.Point(110.4869314,24.73183843);
    myP1[4] = new BMap.Point(110.4926106,24.74881876);
    myP1[5] = new BMap.Point(110.4692519,24.76979392);
    var scenic_name = new Array();
    scenic_name=["梦幻漓江","芦笛岩","红溪","荔江湾","大榕树","漓水古越","相公山"];
    var scenic_name1 = new Array();
    scenic_name1 = ["红溪","世外桃源","荔江湾","大榕树","漓水古越","桂林千古情"];


    window.run1 = function (){
        var i=myP.length;
        map.clearOverlays();                        //清除地图上所有的覆盖物
        var walking = new BMap.WalkingRoute(map);    //创建步行实例
        var j=0;
        while(j+1<i){
            walking.search(myP[j],myP[j+1])
            j++;
        }
        walking.setSearchCompleteCallback(function(){
            var pts = walking.getResults().getPlan(0).getRoute(0).getPath();    //通过步行实例，获得一系列点的数组

            var polyline = new BMap.Polyline(pts);
            map.addOverlay(polyline);

            var k=0;
            while(k<i){
                var m = new BMap.Marker(myP[k]);
                map.addOverlay(m);
                k++;
            };
            // var lab1 = new BMap.Label("起点/终点",{position:myP[0]});        //创建3个label
            // map.addOverlay(lab1);
            // var lab2 = new BMap.Label("途径点",{position:myP[1]});
            // map.addOverlay(lab2);
            var lab_mid=[0];
            var n = 0;
            while(n<i){
                lab_mid[n] = new BMap.Label(n+1+"."+scenic_name[n],{position:myP[n]});
                map.addOverlay(lab_mid[n])
                n++;
            }
            // var lab3 = new BMap.Label("起点/终点",{position:myP[myP.length-1]});
            // map.addOverlay(lab3);

            setTimeout(function(){
                //map.setViewport([myP[0],myP[1],myP[2]]);          //调整到最佳视野
                map.setViewport(myP);          //调整到最佳视野
            },1000);

        });
    }

    window.run2 = function (){
        var i=myP1.length;
        map.clearOverlays();                        //清除地图上所有的覆盖物
        var walking = new BMap.WalkingRoute(map);    //创建步行实例
        var j=0;
        while(j+1<i){
            walking.search(myP1[j],myP1[j+1])
            j++;
        }
        walking.setSearchCompleteCallback(function(){
            var pts = walking.getResults().getPlan(0).getRoute(0).getPath();    //通过步行实例，获得一系列点的数组

            var polyline = new BMap.Polyline(pts);
            map.addOverlay(polyline);

            var k=0;
            while(k<i){
                var m = new BMap.Marker(myP1[k]);
                map.addOverlay(m);
                k++;
            };
            // var lab1 = new BMap.Label("起点/终点",{position:myP[0]});        //创建3个label
            // map.addOverlay(lab1);
            // var lab2 = new BMap.Label("途径点",{position:myP[1]});
            // map.addOverlay(lab2);
            var lab_mid=[0];
            var n = 0;
            while(n<i){
                lab_mid[n] = new BMap.Label(n+1+"."+scenic_name1[n],{position:myP1[n]});
                map.addOverlay(lab_mid[n])
                n++;
            }
            // var lab3 = new BMap.Label("起点/终点",{position:myP[myP.length-1]});
            // map.addOverlay(lab3);

            setTimeout(function(){
                //map.setViewport([myP[0],myP[1],myP[2]]);          //调整到最佳视野
                map.setViewport(myP1);          //调整到最佳视野
            },1000);

        });
    }


</script>
</html>
